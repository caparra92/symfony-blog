{% extends 'base.html.twig' %}

{% block title %}Posts
{% endblock %}

{% block content %}
	<div class="container">
		<div class="row">
			<div class="col-md-4">
				<h5 class="m-2 p-3">Related posts</h5>
				{% for post in posts %}
					<ul>
						<li class="list-group-item">
							<a class="text-decoration-none text-secondary" href="posts/{{post.id}}">{{post.title}} by <small>{{post.user.name}}</small></a>
						</li>
					</ul>
				{% endfor %}
			</div>
			<div class="col-md-8">
					{% for post in posts %}
					<div class="m-3 p-2">
						<div class="w-100 d-flex justify-content-between my-3">
							<h3>{{post.title}}</h1>
							{% if app.user %}
								<div>
									<a class="btn btn-warning" href="posts/edit/{{post.id}}">
										<i class="fa fa-edit"></i>
									</a>
									<a class="btn btn-danger" href="posts/delete/{{post.id}}" onclick="return confirm('Are you sure you want to delete this post?')">
										<i class="fa fa-trash"></i>
									</a>
								</div>
							{% endif %}
						</div>
						<img class="img-fluid" src="{{ asset('uploads/files/' ~ post.image) }}">
						<p>{{post.description}}</p>
						<div class="d-flex justify-content-between">
							<small>Category:
								{{post.category.name}}</small>
							<small>Author:
								{{ post.user.name }}
								|
								{{post.date|date('Y-m-d')}}
							</small>
						</div>
					</div>
					{% endfor %}
			</div>
		</div>
	</div>
{% endblock %}
